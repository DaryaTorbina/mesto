(()=>{"use strict";var e,t,n,r=(n=".popup__form",(t="formSelector")in(e={formSelector:".popup__form",inputSelector:"popup__text",submitButtonSelector:"popup__button-save",inactiveButtonClass:"popup__button-save_inacive",inputErrorClass:"popup__text_type_error",errorClass:"popup__error_active"})?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e),o=document.querySelector(".popup_profile"),i=(document.querySelector(".popup_mesto"),o.querySelector("#name-input")),a=o.querySelector("#about-input"),u=document.querySelector(".profile__avatar-edit"),c=document.querySelector(".profile"),s=c.querySelector(".profile__edit-button"),l=c.querySelector(".profile__add-button"),f="#element",p=document.querySelector(".popup__container_zoom"),h=p.querySelector(".popup__image"),d=p.querySelector(".popup__description");function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(t){var n=t.address,r=t.token,o=t.groupId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._token=r,this._groupId=o,this._address=n}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("".concat(e.status," ").concat(e.statusText))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._address,"/").concat(this._groupId,"/users/me"),{headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._address,"/").concat(this._groupId,"/cards"),{headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"getServerData",value:function(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}},{key:"updateUserInfo",value:function(e){return fetch("".concat(this._address,"/").concat(this._groupId,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify(e)}).then(this._checkResponse)}},{key:"addNewMesto",value:function(e){return fetch("".concat(this._address,"/").concat(this._groupId,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify(e)}).then(this._checkResponse)}},{key:"removeMesto",value:function(e){return fetch("".concat(this._address,"/").concat(this._groupId,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"addLikeMesto",value:function(e){return fetch("".concat(this._address,"/").concat(this._groupId,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._checkResponse)}},{key:"deleteLikeMesto",value:function(e){return fetch("".concat(this._address,"/").concat(this._groupId,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._checkResponse)}},{key:"updateProfileAvatar",value:function(e){return fetch("".concat(this._address,"/").concat(this._groupId,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify(e)}).then(this._checkResponse)}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(t){var n=t.data,r=t.userId,o=t.cardSelector,i=t.handleCardClick,a=t.handleLikeButtonClick,u=t.handleRemoveButtonClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userId=r,this._userMesto=r===n.owner._id,this._imageLink=n.link,this._imageName=n.name,this._name=n.name,this._likes=n.likes,this._cardId=n._id,this._cardSelector=o,this._handleCardClick=i,this._handleLikeButtonClick=a,this._handleRemoveButtonClick=u}var t,n;return t=e,(n=[{key:"_getTemplateElement",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._userMesto&&this._element.querySelector(".element__delete").addEventListener("click",(function(t){e._handleRemoveButtonClick(t)})),this._buttonLike.addEventListener("click",(function(t){return e._handleLikeButtonClick(t)})),this._elementCardImage.addEventListener("click",(function(){return e._handleCardClick()}))}},{key:"generateCard",value:function(){return this._element=this._getTemplateElement(),this._buttonLike=this._element.querySelector(".element__like"),this._countLike=this._element.querySelector(".element__like-count"),this._elementCardImage=this._element.querySelector(".element__image"),this._userMesto||this._element.querySelector(".element__delete").remove(),this._elementTitle=this._element.querySelector(".element__name"),this._setEventListeners(),this._elementCardImage.src=this._imageLink,this._elementCardImage.alt=this._imageName,this._countLike.textContent=this._likes.length,this._toggleLikeState(),this._element}},{key:"_toggleLikeState",value:function(){this._checkLike()?this.setLike():this.removeLike()}},{key:"setLike",value:function(){this._buttonLike.classList.add("element__like_active"),this.isLiked=!0}},{key:"removeLike",value:function(){this._buttonLike.classList.remove("element__like_active"),this.isLiked=!1}},{key:"likesCount",value:function(e){this._countLike.textContent=e.length}},{key:"_checkLike",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}},{key:"getCardId",value:function(){return this._cardId}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(".".concat(this._config.inputSelector))),this._buttonElement=this._formElement.querySelector(".".concat(this._config.submitButtonSelector))}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._config.errorClass),e.classList.add(this._config.inputErrorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));t.classList.remove(this._config.errorClass),t.textContent="",e.classList.remove(this._config.inputErrorClass)}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"_setEventListeners",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e.toggleButtonState()}))}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"clearError",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._containerElement=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}},{key:"addNewItem",value:function(e){this._containerElement.prepend(e)}},{key:"addItem",value:function(e){this._containerElement.append(e)}}])&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup__open"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup__open"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListener",value:function(){var e=this;this._popupElement.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup__open")||t.target.classList.contains("popup__button-close"))&&e.close()}))}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=P(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},O.apply(this,arguments)}function P(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}function I(e,t){return I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},I(e,t)}function j(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(o){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._popupForm=n._popupElement.querySelector(".popup__form"),n._inputs=n._popupForm.querySelectorAll(".popup__text"),n._submitCallback=t,n._formElementSubmitButton=n._popupForm.querySelector(".popup__button-save"),n}return t=a,(n=[{key:"getPopupForm",value:function(){return this._popupForm}},{key:"_getInputValues",value:function(){var e={};return this._inputs.forEach((function(t){e[t.name]=t.value})),e}},{key:"getFormInputValues",value:function(){return this._getInputValues()}},{key:"close",value:function(){this._popupForm.reset(),O(R(a.prototype),"close",this).call(this)}},{key:"setEventListener",value:function(){var e=this;this._popupForm.addEventListener("submit",(function(t){return e._submitCallback(t)})),O(R(a.prototype),"setEventListener",this).call(this)}},{key:"isLoadingMessage",value:function(e){this._formElementSubmitButton.textContent=!0===e?"Сохранение...":"Сохранить"}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(L);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=M(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},x.apply(this,arguments)}function M(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}function N(e,t){return N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},N(e,t)}function D(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=F(r);if(o){var n=F(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return D(this,e)});function a(){return A(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"open",value:function(e,t){h.src=e,h.alt=t,d.textContent=t,x(F(a.prototype),"open",this).call(this)}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(L);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(){return H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=J(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},H.apply(this,arguments)}function J(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=K(e)););return e}function $(e,t){return $=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$(e,t)}function G(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}var Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=K(r);if(o){var n=K(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return G(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._formElement=t._popupElement.querySelector(".popup__form"),t}return t=a,(n=[{key:"setEventListener",value:function(){var e=this;this._formElement.addEventListener("submit",(function(t){return e._handlerSubmitForm(t)})),H(K(a.prototype),"setEventListener",this).call(this)}},{key:"changeHandlerSubmitForm",value:function(e){this._handlerSubmitForm=e}}])&&z(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(L);function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var X=function(){function e(t){var n=t.inputProfileName,r=t.inputProfileAbout,o=t.inputProfileAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputProfileName=document.querySelector(n),this._inputProfileAbout=document.querySelector(r),this._inputProfileAvatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{userName:this._inputProfileName.textContent,userDescription:this._inputProfileAbout.textContent}}},{key:"setUserInfo",value:function(e){var t=e.userName,n=e.userDescription;this._inputProfileName.textContent=t,this._inputProfileAbout.textContent=n}},{key:"setUserAvatar",value:function(e){var t=e.userAvatarLink;this._inputProfileAvatar.src=t}},{key:"saveUserId",value:function(e){this._userId=e}},{key:"getUserId",value:function(){return this._userId}}])&&W(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z=new _({address:"https://mesto.nomoreparties.co/v1",groupId:"cohort-41",token:"b998bf4e-efa3-49ce-b447-6c7ee02ac497"}),ee=new X({inputProfileName:".profile__name",inputProfileAbout:".profile__about",inputProfileAvatar:".profile__avatar"});Z.getServerData().then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ee.setUserInfo({userName:i.name,userDescription:i.about}),ee.setUserAvatar({userAvatarLink:i.avatar}),ee.saveUserId(i._id),te.renderItems(o)})).catch((function(e){console.error(e)}));var te=new E({renderer:function(e){var t=oe(e,f);te.addItem(t)}},".elements"),ne=new q(".popup_mesto",(function(e){e.preventDefault(),ne.isLoadingMessage(!0);var t=ne.getFormInputValues(),n={name:t.name,link:t.url};Z.addNewMesto(n).then((function(e){var t=oe(e,f);te.addNewItem(t),ne.close()})).catch((function(e){console.error(e)})).finally((function(){ne.isLoadingMessage(!1)}))}));ne.setEventListener();var re=new k(r,ne.getPopupForm());function oe(e,t){var n=new m({data:e,cardSelector:t,userId:ee.getUserId(),handleCardClick:function(){le.open(e.link,e.name)},handleLikeButtonClick:function(){n.isLiked?Z.deleteLikeMesto(n.getCardId()).then((function(e){n.removeLike(),n.likesCount(e.likes)})).catch((function(e){console.error(e)})):Z.addLikeMesto(n.getCardId()).then((function(e){n.setLike(),n.likesCount(e.likes)})).catch((function(e){console.error(e)}))},handleRemoveButtonClick:function(e){var t=e.target.closest(".element"),r=n.getCardId();se.changeHandlerSubmitForm((function(e){e.preventDefault(),Z.removeMesto(r).then((function(){t.remove(),se.close()})).catch((function(e){console.error(e)}))})),se.open()}});return n.generateCard()}re.enableValidation(),l.addEventListener("click",(function(){re.clearError(),ne.open()}));var ie=new q(".popup_profile",(function(e){e.preventDefault(),ie.isLoadingMessage(!0);var t=ie.getFormInputValues();Z.updateUserInfo({name:t.nameinput,about:t.aboutinput}).then((function(e){ee.setUserInfo({userName:e.name,userDescription:e.about}),ie.close()})).catch((function(e){console.error(e)})).finally((function(){ie.isLoadingMessage(!1)}))}));ie.setEventListener();var ae=new k(r,ie.getPopupForm());ae.enableValidation(),s.addEventListener("click",(function(){var e=ee.getUserInfo();a.value=e.userDescription,i.value=e.userName,ae.clearError(),ie.open()}));var ue=new q(".popup_newavatar",(function(e){e.preventDefault(),ue.isLoadingMessage(!0);var t=ue.getFormInputValues();Z.updateProfileAvatar({avatar:t.urlavatar}).then((function(e){ee.setUserAvatar({userAvatarLink:e.avatar}),ue.close()})).catch((function(e){console.error(e)})).finally((function(){ue.isLoadingMessage(!1)}))}));ue.setEventListener();var ce=new k(r,ue.getPopupForm());ce.enableValidation(),u.addEventListener("click",(function(){ce.clearError(),ue.open()}));var se=new Q(".popup_confirmation");se.setEventListener();var le=new U(".popup_zoom");le.setEventListener()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQWtCMkQsaUJBQWlCLFNBQVMsV0FDMUMsSUFBTStJLEVBQWV0RCxHQUFTeEgsY0FDOUIvQixFQUFpQm9JLE1BQVF5RSxFQUFhekQsZ0JBQ3RDckosRUFBZ0JxSSxNQUFReUUsRUFBYTFELFNBQ3JDeUQsR0FBc0JOLGFBQ3RCQyxHQUFVYixVQUtaLElBQU1vQixHQUFjLElBQUlsRixFVnBMaUIsb0JVb0x3QixTQUFDN0QsR0FDaEVBLEVBQUk0RyxpQkFDSm1DLEdBQVlsQyxrQkFBaUIsR0FDN0IsSUFBTTRCLEVBQWtCTSxHQUFZaEMscUJBQ3BDeEIsRUFDR3lELG9CQUFvQixDQUFFaEQsT0FBUXlDLEVBQWdCUSxZQUM5Q3JMLE1BQUssU0FBQ1csR0FDTGlILEdBQVNPLGNBQWMsQ0FBRVQsZUFBZ0IvRyxFQUFLeUgsU0FDOUMrQyxHQUFZckYsV0FFYjBDLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsTUFBTUYsTUFFZmUsU0FBUSxXQUNQMkIsR0FBWWxDLGtCQUFpQixTQUduQ2tDLEdBQVkxQixtQkFFWixJQUFNNkIsR0FBdUIsSUFBSTdILEVBQy9CL0YsRUFDQXlOLEdBQVl4QixnQkFFZDJCLEdBQXFCWixtQkFFckJwTSxFQUF3QjZELGlCQUFpQixTQUFTLFdBQ2hEbUosR0FBcUJYLGFBQ3JCUSxHQUFZcEIsVUFJZCxJQUFNTyxHQUFlLElBQUl4RCxFVnBOVyx1QlVxTnBDd0QsR0FBYWIsbUJBR2IsSUFBTUssR0FBWSxJQUFJakQsRVZ6TlcsZVUwTmpDaUQsR0FBVUwsb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHQvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdC9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0L0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0L0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0L1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0L1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdC9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdC9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHQvUG9wdXBDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0L1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwicG9wdXBfX3RleHRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCJwb3B1cF9fYnV0dG9uLXNhdmVcIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b24tc2F2ZV9pbmFjaXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX190ZXh0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl9hY3RpdmVcIixcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlU2VsZWN0b3IgPSBcIi5wb3B1cF9wcm9maWxlXCI7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEVsZW1lbnRQaG90b1NlbGVjdG9yID0gXCIucG9wdXBfbWVzdG9cIjtcclxuZXhwb3J0IGNvbnN0IHBvcHVwWm9vbVNlbGVjdG9yID0gXCIucG9wdXBfem9vbVwiO1xyXG5leHBvcnQgY29uc3QgcG9wdXBDb25maXJtU2VsZWN0b3IgPSBcIi5wb3B1cF9jb25maXJtYXRpb25cIjtcclxuZXhwb3J0IGNvbnN0IHBvcHVwVXBkYXRlQXZhdGFyU2VsZWN0b3IgPSBcIi5wb3B1cF9uZXdhdmF0YXJcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBpbnB1dFByb2ZpbGVBdmF0YXIgPSBcIi5wcm9maWxlX19hdmF0YXJcIjtcclxuZXhwb3J0IGNvbnN0IGlucHV0UHJvZmlsZU5hbWUgPSBcIi5wcm9maWxlX19uYW1lXCI7XHJcbmV4cG9ydCBjb25zdCBpbnB1dFByb2ZpbGVBYm91dCA9IFwiLnByb2ZpbGVfX2Fib3V0XCI7XHJcblxyXG4vL9C80L7QtNCw0LvQutC4XHJcbmV4cG9ydCBjb25zdCBlZGl0TW9kYWxQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9wcm9maWxlXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkTW9kYWxNZXN0byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfbWVzdG9cIik7XHJcblxyXG4vL9C/0L7Qu9GPXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGF0YU5hbWUgPSBlZGl0TW9kYWxQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZS1pbnB1dFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEYXRhQWJvdXQgPSBlZGl0TW9kYWxQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIjYWJvdXQtaW5wdXRcIik7XHJcblxyXG4vL3BvcHVwINC60L3QvtC/0LrQuFxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhckVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2F2YXRhci1lZGl0XCJcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZVwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IHByb2ZpbGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgYWRkTWVzdG9CdXR0b24gPSBwcm9maWxlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGFpbmVyU2VsZWN0b3IgPSBcIi5lbGVtZW50c1wiO1xyXG5leHBvcnQgY29uc3QgY2FyZFNlbGVjdG9yID0gXCIjZWxlbWVudFwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwWm9vbUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucG9wdXBfX2NvbnRhaW5lcl96b29tXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwWm9vbUltYWdlSW1nID1cclxuICBwb3B1cFpvb21Db250YWluZXIucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFpvb21JbWFnZVRpdGxlID0gcG9wdXBab29tQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucG9wdXBfX2Rlc2NyaXB0aW9uXCJcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBtZXN0b0FwaUNvbmZpZyA9IHtcclxuICBhZGRyZXNzOiBcImh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MVwiLFxyXG4gIGdyb3VwSWQ6IGBjb2hvcnQtNDFgLFxyXG4gIHRva2VuOiBgYjk5OGJmNGUtZWZhMy00OWNlLWI0NDctNmM3ZWUwMmFjNDk3YCxcclxufTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGFkZHJlc3MsIHRva2VuLCBncm91cElkIH0pIHtcclxuICAgIHRoaXMuX3Rva2VuID0gdG9rZW47XHJcbiAgICB0aGlzLl9ncm91cElkID0gZ3JvdXBJZDtcclxuICAgIHRoaXMuX2FkZHJlc3MgPSBhZGRyZXNzO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9hZGRyZXNzfS8ke3RoaXMuX2dyb3VwSWR9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2FkZHJlc3N9LyR7dGhpcy5fZ3JvdXBJZH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRTZXJ2ZXJEYXRhKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVVzZXJJbmZvKGJvZHkpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9hZGRyZXNzfS8ke3RoaXMuX2dyb3VwSWR9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBhZGROZXdNZXN0byhib2R5KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYWRkcmVzc30vJHt0aGlzLl9ncm91cElkfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVNZXN0byhjYXJkSUQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9hZGRyZXNzfS8ke3RoaXMuX2dyb3VwSWR9L2NhcmRzLyR7Y2FyZElEfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgYWRkTGlrZU1lc3RvKGNhcmRJRCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2FkZHJlc3N9LyR7dGhpcy5fZ3JvdXBJZH0vY2FyZHMvbGlrZXMvJHtjYXJkSUR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVMaWtlTWVzdG8oY2FyZElEKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYWRkcmVzc30vJHt0aGlzLl9ncm91cElkfS9jYXJkcy9saWtlcy8ke2NhcmRJRH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVByb2ZpbGVBdmF0YXIoYm9keSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2FkZHJlc3N9LyR7dGhpcy5fZ3JvdXBJZH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHtcclxuICAgIGRhdGEsXHJcbiAgICB1c2VySWQsXHJcbiAgICBjYXJkU2VsZWN0b3IsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICBoYW5kbGVMaWtlQnV0dG9uQ2xpY2ssXHJcbiAgICBoYW5kbGVSZW1vdmVCdXR0b25DbGljayxcclxuICB9KSB7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl91c2VyTWVzdG8gPSB1c2VySWQgPT09IGRhdGEub3duZXIuX2lkO1xyXG4gICAgdGhpcy5faW1hZ2VMaW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5faW1hZ2VOYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbkNsaWNrID0gaGFuZGxlTGlrZUJ1dHRvbkNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlUmVtb3ZlQnV0dG9uQ2xpY2sgPSBoYW5kbGVSZW1vdmVCdXR0b25DbGljaztcclxuICB9XHJcblxyXG4gIC8vINC90LDRhdC+0LTQuNC8INCyIGRvbSDQuCDQutC70L7QvdC40YDRg9C10LxcclxuICBfZ2V0VGVtcGxhdGVFbGVtZW50KCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBpZiAodGhpcy5fdXNlck1lc3RvKSB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19kZWxldGVcIilcclxuICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgICAgIHRoaXMuX2hhbmRsZVJlbW92ZUJ1dHRvbkNsaWNrKGV2dCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9idXR0b25MaWtlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uQ2xpY2soZXZ0KVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2VsZW1lbnRDYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljaygpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy/RgdC+0LfQtNCw0L3QuNC1INC60LDRgNGC0L7Rh9C60LhcclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGVFbGVtZW50KCk7XHJcbiAgICB0aGlzLl9idXR0b25MaWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2VcIik7XHJcbiAgICB0aGlzLl9jb3VudExpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS1jb3VudFwiKTtcclxuICAgIHRoaXMuX2VsZW1lbnRDYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XHJcbiAgICBpZiAoIXRoaXMuX3VzZXJNZXN0bykge1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fZGVsZXRlXCIpLnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fZWxlbWVudFRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX25hbWVcIik7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZWxlbWVudENhcmRJbWFnZS5zcmMgPSB0aGlzLl9pbWFnZUxpbms7XHJcbiAgICB0aGlzLl9lbGVtZW50Q2FyZEltYWdlLmFsdCA9IHRoaXMuX2ltYWdlTmFtZTtcclxuICAgIHRoaXMuX2NvdW50TGlrZS50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuXHJcbiAgICB0aGlzLl90b2dnbGVMaWtlU3RhdGUoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcblxyXG4gIF90b2dnbGVMaWtlU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5fY2hlY2tMaWtlKCkpIHtcclxuICAgICAgdGhpcy5zZXRMaWtlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnJlbW92ZUxpa2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldExpa2UoKSB7XHJcbiAgICB0aGlzLl9idXR0b25MaWtlLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50X19saWtlX2FjdGl2ZVwiKTtcclxuICAgIHRoaXMuaXNMaWtlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICByZW1vdmVMaWtlKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uTGlrZS5jbGFzc0xpc3QucmVtb3ZlKFwiZWxlbWVudF9fbGlrZV9hY3RpdmVcIik7XHJcbiAgICB0aGlzLmlzTGlrZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGxpa2VzQ291bnQoZGF0YSkge1xyXG4gICAgdGhpcy5fY291bnRMaWtlLnRleHRDb250ZW50ID0gZGF0YS5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tMaWtlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUoKGl0ZW0pID0+IGl0ZW0uX2lkID09PSB0aGlzLl91c2VySWQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRJZDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChgLiR7dGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3J9YClcbiAgICApO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke3RoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcn1gXG4gICAgKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTsgLy8vLy8vLy8vLy8vL1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTsgLy8vLy8vLy8vLy8vLy9cbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7IC8vLy8vLy8vLy9cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTsgLy8vLy8vLy9cbiAgfVxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIH1cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIC8vLy8vLy8vL1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG5cbiAgY2xlYXJFcnJvcigpIHtcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoZnVuY3Rpb24gKGlucHV0RWxlbWVudCkge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8v0L7RgtCy0LXRh9Cw0LXRgiDQt9CwINC+0YLRgNC40YHQvtCy0LrRgyDRjdC70LXQvNC10L3RgtC+0LIg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcbi8v0KMg0LrQu9Cw0YHRgdCwIFNlY3Rpb24g0L3QtdGCINGB0LLQvtC10Lkg0YDQsNC30LzQtdGC0LrQuC4g0J7QvSDQv9C+0LvRg9GH0LDQtdGCINGA0LDQt9C80LXRgtC60YMg0YfQtdGA0LXQtyDRhNGD0L3QutGG0LjRji3QutC+0LvQsdGN0Log0Lgg0LLRgdGC0LDQstC70Y/QtdGCINC10ZEg0LIg0LrQvtC90YLQtdC50L3QtdGALlxyXG5cclxuLy/Qn9C10YDQstGL0Lwg0L/QsNGA0LDQvNC10YLRgNC+0Lwg0LrQvtC90YHRgtGA0YPQutGC0L7RgNCwINC/0YDQuNC90LjQvNCw0LXRgiDQvtCx0YrQtdC60YIg0YEg0LTQstGD0LzRjyDRgdCy0L7QudGB0YLQstCw0LzQuFxyXG4vL9Ch0LLQvtC50YHRgtCy0L4gaXRlbXMg4oCUINGN0YLQviDQvNCw0YHRgdC40LIg0LTQsNC90L3Ri9GFLCDQutC+0YLQvtGA0YvQtSDQvdGD0LbQvdC+XHJcbi8v0LTQvtCx0LDQstC40YLRjCDQvdCwINGB0YLRgNCw0L3QuNGG0YMg0L/RgNC4INC40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNC4INC60LvQsNGB0YHQsC9cclxuLy/QodCy0L7QudGB0YLQstC+IHJlbmRlcmVyIOKAlCDRjdGC0L4g0YTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINC+0YLQstC10YfQsNC10YIg0LfQsCDRgdC+0LfQtNCw0L3QuNC1INC4INC+0YLRgNC40YHQvtCy0LrRgyDQtNCw0L3QvdGL0YUg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcbi8v0JLRgtC+0YDQvtC5INC/0LDRgNCw0LzQtdGC0YAg0LrQvtC90YHRgtGA0YPQutGC0L7RgNCwIOKAlCDRgdC10LvQtdC60YLQvtGAINC60L7QvdGC0LXQudC90LXRgNCwLCDQsiDQutC+0YLQvtGA0YvQuSDQvdGD0LbQvdC+INC00L7QsdCw0LLQu9GP0YLRjCDRgdC+0LfQtNCw0L3QvdGL0LUg0Y3Qu9C10LzQtdC90YLRiy5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkTmV3SXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXJFbGVtZW50LnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lckVsZW1lbnQuYXBwZW5kKGl0ZW0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX19vcGVuXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vcGVuXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX29wZW5cIikgfHxcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19idXR0b24tY2xvc2VcIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdENhbGxiYWNrKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX190ZXh0XCIpO1xyXG4gICAgdGhpcy5fc3VibWl0Q2FsbGJhY2sgPSBzdWJtaXRDYWxsYmFjaztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50U3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLnBvcHVwX19idXR0b24tc2F2ZVwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy/Qv9C10YDQtdC00LDQtdC8INGE0L7RgNC80YMg0LTQsNC90L3Ri9C1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gIGdldFBvcHVwRm9ybSgpIHtcclxuICAgIHJldHVybiB0aGlzLl9wb3B1cEZvcm07XHJcbiAgfVxyXG5cclxuICAvL9GB0LHQuNGA0LDQtdGCINC00LDQvdC90YvQtSDQstGB0LXRhSDQv9C+0LvQtdC5INGE0L7RgNC80YtcclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIC8v0L/QtdGA0LXQtNCw0LXQvCDQv9C+0LvRjyDQuNC90L/Rg9GCXHJcbiAgZ2V0Rm9ybUlucHV0VmFsdWVzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgfVxyXG5cclxuICAvLyDQv9C10YDQtdC30LDQv9C40YHRi9Cy0LDQtdGCINGA0L7QtNC40YLQtdC70YzRgdC60LjQuSAsINGB0LHRgNCw0YHRi9Cy0LDQtdGC0YHRj1xyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxuICAvL9C/0LXRgNC10LfQsNC/0LjRgdGL0LLQsNC10YIg0YDQvtC00LjRgtC10LvRjNGB0LrQuNC5INC80LXRgtC+0LQvINC00L7QsdCw0LvRj9C10YIg0L7QsdGA0LDQsdC+0YLRh9C40Log0LrQu9C40LrQsCDQv9C+INC30LDQutGA0YvRgtC40Y4g0Lgg0L7QsdGA0LDQsdC+0YLRh9C40Log0YHQsNCx0LzQuNGC0LAg0YTQvtGA0LzRi1xyXG4gIHNldEV2ZW50TGlzdGVuZXIoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PlxyXG4gICAgICB0aGlzLl9zdWJtaXRDYWxsYmFjayhldnQpXHJcbiAgICApO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcigpO1xyXG4gIH1cclxuXHJcbiAgaXNMb2FkaW5nTWVzc2FnZShpc0xvYWRpbmcpIHtcclxuICAgIGlmIChpc0xvYWRpbmcgPT09IHRydWUpIHtcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnRTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudFN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LjRgtGMXCI7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIHBvcHVwWm9vbUltYWdlSW1nLFxyXG4gIHBvcHVwWm9vbUltYWdlVGl0bGUsXHJcbn0gZnJvbSBcIi4uL3NjcmlwdC91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbi8v0L/QtdGA0LXQt9Cw0L/QuNGB0YvQstCw0LXRgtGA0L7QtNC40YLQtdC70YzRgdC60LjQuSDQvNC10YLQvtC0IG9wZW5cclxuLy/QvdGD0LbQvdC+INCy0YHRgtCw0LLQu9GP0YLRjCDQsiDQv9C+0L/QsNC/INC60LDRgNGC0LjQvdC60YMg0YEgc3JjINC40LfQvtCx0YDQsNC20LXQvdC40Y8g0Lgg0L/QvtC00L/QuNGB0YzRjiDQuiDQutCw0YDRgtC40L3QutC1XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBvcGVuKGxpbmssIG5hbWUpIHtcclxuICAgIHBvcHVwWm9vbUltYWdlSW1nLnNyYyA9IGxpbms7XHJcbiAgICBwb3B1cFpvb21JbWFnZUltZy5hbHQgPSBuYW1lO1xyXG4gICAgcG9wdXBab29tSW1hZ2VUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVyKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVyU3VibWl0Rm9ybShldnQpXHJcbiAgICApO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcigpO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlSGFuZGxlclN1Ym1pdEZvcm0oc3VibWl0QWN0aW9uKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVyU3VibWl0Rm9ybSA9IHN1Ym1pdEFjdGlvbjtcclxuICB9XHJcbn1cclxuIiwiLy8g0L7RgtCy0LXRh9Cw0LXRgiDQt9CwINGD0L/RgNCw0LLQu9C10L3QuNC1INC+0YLQvtCx0YDQsNC20LXQvdC40LXQvCDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcblxyXG4vL9Cf0YDQuNC90LjQvNCw0LXRgiDQsiDQutC+0L3RgdGC0YDRg9C60YLQvtGAINC+0LHRitC10LrRgiDRgSDRgdC10LvQtdC60YLQvtGA0LDQvNC4INC00LLRg9GFINGN0LvQtdC80LXQvdGC0L7Qsjog0Y3Qu9C10LzQtdC90YLQsFxyXG4vL9C40LzQtdC90Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC4INGN0LvQtdC80LXQvdGC0LAg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0YHQtdCx0LUuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IGlucHV0UHJvZmlsZU5hbWUsIGlucHV0UHJvZmlsZUFib3V0LCBpbnB1dFByb2ZpbGVBdmF0YXIgfSkge1xyXG4gICAgdGhpcy5faW5wdXRQcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaW5wdXRQcm9maWxlTmFtZSk7XHJcbiAgICB0aGlzLl9pbnB1dFByb2ZpbGVBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaW5wdXRQcm9maWxlQWJvdXQpO1xyXG4gICAgdGhpcy5faW5wdXRQcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpbnB1dFByb2ZpbGVBdmF0YXIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1c2VyTmFtZTogdGhpcy5faW5wdXRQcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgdXNlckRlc2NyaXB0aW9uOiB0aGlzLl9pbnB1dFByb2ZpbGVBYm91dC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IHVzZXJOYW1lLCB1c2VyRGVzY3JpcHRpb24gfSkge1xyXG4gICAgdGhpcy5faW5wdXRQcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHVzZXJOYW1lO1xyXG4gICAgdGhpcy5faW5wdXRQcm9maWxlQWJvdXQudGV4dENvbnRlbnQgPSB1c2VyRGVzY3JpcHRpb247XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKHsgdXNlckF2YXRhckxpbmsgfSkge1xyXG4gICAgdGhpcy5faW5wdXRQcm9maWxlQXZhdGFyLnNyYyA9IHVzZXJBdmF0YXJMaW5rO1xyXG4gIH1cclxuXHJcbiAgc2F2ZVVzZXJJZCh1c2VySWQpIHtcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICB9XHJcbiAgZ2V0VXNlcklkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3VzZXJJZDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7XG4gIGNvbmZpZyxcbiAgcG9wdXBQcm9maWxlU2VsZWN0b3IsXG4gIHBvcHVwRWxlbWVudFBob3RvU2VsZWN0b3IsXG4gIHBvcHVwWm9vbVNlbGVjdG9yLFxuICBwb3B1cFVwZGF0ZUF2YXRhclNlbGVjdG9yLFxuICBwcm9maWxlQXZhdGFyRWRpdEJ1dHRvbixcbiAgaW5wdXRQcm9maWxlTmFtZSxcbiAgaW5wdXRQcm9maWxlQWJvdXQsXG4gIGlucHV0UHJvZmlsZUF2YXRhcixcbiAgZWRpdFByb2ZpbGVCdXR0b24sXG4gIGFkZE1lc3RvQnV0dG9uLFxuICBwb3B1cENvbmZpcm1TZWxlY3RvcixcbiAgY2FyZHNDb250YWluZXJTZWxlY3RvcixcbiAgY2FyZFNlbGVjdG9yLFxuICBwcm9maWxlRGF0YUFib3V0LFxuICBwcm9maWxlRGF0YU5hbWUsXG4gIG1lc3RvQXBpQ29uZmlnLFxufSBmcm9tIFwiLi4vc2NyaXB0L3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vc2NyaXB0L0FwaS5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL3NjcmlwdC9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vc2NyaXB0L0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9zY3JpcHQvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL3NjcmlwdC9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL3NjcmlwdC9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm0gZnJvbSBcIi4uL3NjcmlwdC9Qb3B1cENvbmZpcm1hdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9zY3JpcHQvVXNlckluZm8uanNcIjtcblxuLy/Qt9Cw0L/RgNC+0YHRiyDQuiDRgdC10YDQstC10YDRg1xuY29uc3QgYXBpID0gbmV3IEFwaShtZXN0b0FwaUNvbmZpZyk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgaW5wdXRQcm9maWxlTmFtZSxcbiAgaW5wdXRQcm9maWxlQWJvdXQsXG4gIGlucHV0UHJvZmlsZUF2YXRhcixcbn0pO1xuXG4vL9C/0LXRgNCy0L7QvdCw0YfQsNC70YzQvdGL0LUg0LTQsNC90L3Ri9C1INGBINGB0LXRgNCy0LXRgNCwXG5cbmFwaVxuICAuZ2V0U2VydmVyRGF0YSgpXG4gIC50aGVuKChyZXNwb25zZXMpID0+IHtcbiAgICBjb25zdCBbY2FyZERhdGEsIHVzZXJEYXRhXSA9IHJlc3BvbnNlcztcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICB1c2VyTmFtZTogdXNlckRhdGEubmFtZSxcbiAgICAgIHVzZXJEZXNjcmlwdGlvbjogdXNlckRhdGEuYWJvdXQsXG4gICAgfSk7XG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih7IHVzZXJBdmF0YXJMaW5rOiB1c2VyRGF0YS5hdmF0YXIgfSk7XG4gICAgdXNlckluZm8uc2F2ZVVzZXJJZCh1c2VyRGF0YS5faWQpO1xuICAgIGNhcmRzLnJlbmRlckl0ZW1zKGNhcmREYXRhKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gIH0pO1xuXG4vLy8vLy/QmtCQ0KDQotCe0KfQmtCYXG4vLyDQvtGC0YDQuNGB0L7QstC60LAg0LrQsNGA0YLQvtGH0LXQulxuY29uc3QgY2FyZHMgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVOZXdDYXJkKGl0ZW0sIGNhcmRTZWxlY3Rvcik7XG4gICAgICBjYXJkcy5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9LFxuICB9LFxuICBjYXJkc0NvbnRhaW5lclNlbGVjdG9yXG4pO1xuXG5jb25zdCBhZGRNb2RhbE1lc3RvID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBFbGVtZW50UGhvdG9TZWxlY3RvciwgKGV2dCkgPT4ge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgYWRkTW9kYWxNZXN0by5pc0xvYWRpbmdNZXNzYWdlKHRydWUpO1xuICBjb25zdCBmb3JtVmFsdWVzID0gYWRkTW9kYWxNZXN0by5nZXRGb3JtSW5wdXRWYWx1ZXMoKTtcblxuICBjb25zdCBpdGVtID0geyBuYW1lOiBmb3JtVmFsdWVzLm5hbWUsIGxpbms6IGZvcm1WYWx1ZXMudXJsIH07XG4gIGFwaVxuICAgIC5hZGROZXdNZXN0byhpdGVtKVxuICAgIC50aGVuKChuZXdDYXJkSXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVOZXdDYXJkKG5ld0NhcmRJdGVtLCBjYXJkU2VsZWN0b3IpO1xuICAgICAgY2FyZHMuYWRkTmV3SXRlbShjYXJkRWxlbWVudCk7XG4gICAgICBhZGRNb2RhbE1lc3RvLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgYWRkTW9kYWxNZXN0by5pc0xvYWRpbmdNZXNzYWdlKGZhbHNlKTtcbiAgICB9KTtcbn0pO1xuYWRkTW9kYWxNZXN0by5zZXRFdmVudExpc3RlbmVyKCk7XG5jb25zdCBwb3B1cFZhbGlkYXRvck1lc3RvID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIGNvbmZpZyxcbiAgYWRkTW9kYWxNZXN0by5nZXRQb3B1cEZvcm0oKVxuKTtcbnBvcHVwVmFsaWRhdG9yTWVzdG8uZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5mdW5jdGlvbiBjcmVhdGVOZXdDYXJkKGl0ZW0sIGNhcmRTZWxlY3Rvcikge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xuICAgIGRhdGE6IGl0ZW0sXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIHVzZXJJZDogdXNlckluZm8uZ2V0VXNlcklkKCksXG4gICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XG4gICAgICBwb3B1cFpvb20ub3BlbihpdGVtLmxpbmssIGl0ZW0ubmFtZSk7XG4gICAgfSxcbiAgICBoYW5kbGVMaWtlQnV0dG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgIGlmIChjYXJkLmlzTGlrZWQpIHtcbiAgICAgICAgYXBpXG4gICAgICAgICAgLmRlbGV0ZUxpa2VNZXN0byhjYXJkLmdldENhcmRJZCgpKVxuICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBjYXJkLnJlbW92ZUxpa2UoKTtcbiAgICAgICAgICAgIGNhcmQubGlrZXNDb3VudChkYXRhLmxpa2VzKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcGlcbiAgICAgICAgICAuYWRkTGlrZU1lc3RvKGNhcmQuZ2V0Q2FyZElkKCkpXG4gICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGNhcmQuc2V0TGlrZSgpO1xuICAgICAgICAgICAgY2FyZC5saWtlc0NvdW50KGRhdGEubGlrZXMpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGhhbmRsZVJlbW92ZUJ1dHRvbkNsaWNrOiAoZXZ0KSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGV2dC50YXJnZXQuY2xvc2VzdChcIi5lbGVtZW50XCIpO1xuICAgICAgY29uc3QgY2FyZElkID0gY2FyZC5nZXRDYXJkSWQoKTtcbiAgICAgIHBvcHVwQ29uZmlybS5jaGFuZ2VIYW5kbGVyU3VibWl0Rm9ybSgoZXZ0KSA9PiB7XG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhcGlcbiAgICAgICAgICAucmVtb3ZlTWVzdG8oY2FyZElkKVxuICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICAgICAgcG9wdXBDb25maXJtLmNsb3NlKCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBwb3B1cENvbmZpcm0ub3BlbigpO1xuICAgIH0sXG4gIH0pO1xuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn1cblxuYWRkTWVzdG9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBWYWxpZGF0b3JNZXN0by5jbGVhckVycm9yKCk7XG4gIGFkZE1vZGFsTWVzdG8ub3BlbigpO1xufSk7XG5cbi8vLy8v0J/QoNCe0KTQmNCb0KxcbmNvbnN0IHBvcHVwVXNlciA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwUHJvZmlsZVNlbGVjdG9yLCAoZXZ0KSA9PiB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBwb3B1cFVzZXIuaXNMb2FkaW5nTWVzc2FnZSh0cnVlKTtcbiAgY29uc3QgZm9ybUlucHV0VmFsdWVzID0gcG9wdXBVc2VyLmdldEZvcm1JbnB1dFZhbHVlcygpO1xuICBhcGlcbiAgICAudXBkYXRlVXNlckluZm8oe1xuICAgICAgbmFtZTogZm9ybUlucHV0VmFsdWVzLm5hbWVpbnB1dCxcbiAgICAgIGFib3V0OiBmb3JtSW5wdXRWYWx1ZXMuYWJvdXRpbnB1dCxcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICAgIHVzZXJOYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIHVzZXJEZXNjcmlwdGlvbjogZGF0YS5hYm91dCxcbiAgICAgIH0pO1xuICAgICAgcG9wdXBVc2VyLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBVc2VyLmlzTG9hZGluZ01lc3NhZ2UoZmFsc2UpO1xuICAgIH0pO1xufSk7XG5wb3B1cFVzZXIuc2V0RXZlbnRMaXN0ZW5lcigpO1xuXG5jb25zdCBwb3B1cFZhbGlkYXRvclByb2ZpbGUgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgY29uZmlnLFxuICBwb3B1cFVzZXIuZ2V0UG9wdXBGb3JtKClcbik7XG5wb3B1cFZhbGlkYXRvclByb2ZpbGUuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCB1c2VySW5mb0RhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlRGF0YUFib3V0LnZhbHVlID0gdXNlckluZm9EYXRhLnVzZXJEZXNjcmlwdGlvbjtcbiAgcHJvZmlsZURhdGFOYW1lLnZhbHVlID0gdXNlckluZm9EYXRhLnVzZXJOYW1lO1xuICBwb3B1cFZhbGlkYXRvclByb2ZpbGUuY2xlYXJFcnJvcigpO1xuICBwb3B1cFVzZXIub3BlbigpO1xufSk7XG5cbi8vLy8vL9CQ0JLQkNCi0JDQoFxuLy/Qt9Cw0L/QuNGB0Ywg0LIg0L/QvtC/0LDQv1xuY29uc3QgcG9wdXBBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cFVwZGF0ZUF2YXRhclNlbGVjdG9yLCAoZXZ0KSA9PiB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBwb3B1cEF2YXRhci5pc0xvYWRpbmdNZXNzYWdlKHRydWUpO1xuICBjb25zdCBmb3JtSW5wdXRWYWx1ZXMgPSBwb3B1cEF2YXRhci5nZXRGb3JtSW5wdXRWYWx1ZXMoKTtcbiAgYXBpXG4gICAgLnVwZGF0ZVByb2ZpbGVBdmF0YXIoeyBhdmF0YXI6IGZvcm1JbnB1dFZhbHVlcy51cmxhdmF0YXIgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih7IHVzZXJBdmF0YXJMaW5rOiBkYXRhLmF2YXRhciB9KTtcbiAgICAgIHBvcHVwQXZhdGFyLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBBdmF0YXIuaXNMb2FkaW5nTWVzc2FnZShmYWxzZSk7XG4gICAgfSk7XG59KTtcbnBvcHVwQXZhdGFyLnNldEV2ZW50TGlzdGVuZXIoKTtcblxuY29uc3QgcG9wdXBBdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgY29uZmlnLFxuICBwb3B1cEF2YXRhci5nZXRQb3B1cEZvcm0oKVxuKTtcbnBvcHVwQXZhdGFyVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTsgLy9cblxucHJvZmlsZUF2YXRhckVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBBdmF0YXJWYWxpZGF0b3IuY2xlYXJFcnJvcigpO1xuICBwb3B1cEF2YXRhci5vcGVuKCk7XG59KTtcblxuLy8vLy/Qo9CU0JDQm9CV0J3QmNCVXG5jb25zdCBwb3B1cENvbmZpcm0gPSBuZXcgUG9wdXBXaXRoQ29uZmlybShwb3B1cENvbmZpcm1TZWxlY3Rvcik7XG5wb3B1cENvbmZpcm0uc2V0RXZlbnRMaXN0ZW5lcigpO1xuXG4vLy8vL9Cj0JLQldCb0JjQp9CV0J3QmNCVXG5jb25zdCBwb3B1cFpvb20gPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBab29tU2VsZWN0b3IpO1xucG9wdXBab29tLnNldEV2ZW50TGlzdGVuZXIoKTtcbiJdLCJuYW1lcyI6WyJjb25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImVkaXRNb2RhbFByb2ZpbGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9maWxlRGF0YU5hbWUiLCJwcm9maWxlRGF0YUFib3V0IiwicHJvZmlsZUF2YXRhckVkaXRCdXR0b24iLCJwcm9maWxlRWxlbWVudCIsImVkaXRQcm9maWxlQnV0dG9uIiwiYWRkTWVzdG9CdXR0b24iLCJjYXJkU2VsZWN0b3IiLCJwb3B1cFpvb21Db250YWluZXIiLCJwb3B1cFpvb21JbWFnZUltZyIsInBvcHVwWm9vbUltYWdlVGl0bGUiLCJBcGkiLCJhZGRyZXNzIiwidG9rZW4iLCJncm91cElkIiwidGhpcyIsIl90b2tlbiIsIl9ncm91cElkIiwiX2FkZHJlc3MiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ0aGVuIiwiX2NoZWNrUmVzcG9uc2UiLCJhbGwiLCJnZXRJbml0aWFsQ2FyZHMiLCJnZXRVc2VySW5mbyIsImJvZHkiLCJtZXRob2QiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZElEIiwiQ2FyZCIsImRhdGEiLCJ1c2VySWQiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVMaWtlQnV0dG9uQ2xpY2siLCJoYW5kbGVSZW1vdmVCdXR0b25DbGljayIsIl91c2VySWQiLCJfdXNlck1lc3RvIiwib3duZXIiLCJfaWQiLCJfaW1hZ2VMaW5rIiwibGluayIsIl9pbWFnZU5hbWUiLCJuYW1lIiwiX25hbWUiLCJfbGlrZXMiLCJsaWtlcyIsIl9jYXJkSWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVMaWtlQnV0dG9uQ2xpY2siLCJfaGFuZGxlUmVtb3ZlQnV0dG9uQ2xpY2siLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwiX2J1dHRvbkxpa2UiLCJfZWxlbWVudENhcmRJbWFnZSIsIl9nZXRUZW1wbGF0ZUVsZW1lbnQiLCJfY291bnRMaWtlIiwicmVtb3ZlIiwiX2VsZW1lbnRUaXRsZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiX3RvZ2dsZUxpa2VTdGF0ZSIsIl9jaGVja0xpa2UiLCJzZXRMaWtlIiwicmVtb3ZlTGlrZSIsImNsYXNzTGlzdCIsImFkZCIsImlzTGlrZWQiLCJzb21lIiwiaXRlbSIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsIl9jb25maWciLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyRWxlbWVudCIsIml0ZW1zIiwicHJlcGVuZCIsImFwcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Q2FsbGJhY2siLCJfcG9wdXBGb3JtIiwiX2lucHV0cyIsIl9zdWJtaXRDYWxsYmFjayIsIl9mb3JtRWxlbWVudFN1Ym1pdEJ1dHRvbiIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiaXNMb2FkaW5nIiwiUG9wdXBXaXRoSW1hZ2UiLCJQb3B1cFdpdGhDb25maXJtIiwiX2hhbmRsZXJTdWJtaXRGb3JtIiwic3VibWl0QWN0aW9uIiwiVXNlckluZm8iLCJpbnB1dFByb2ZpbGVOYW1lIiwiaW5wdXRQcm9maWxlQWJvdXQiLCJpbnB1dFByb2ZpbGVBdmF0YXIiLCJfaW5wdXRQcm9maWxlTmFtZSIsIl9pbnB1dFByb2ZpbGVBYm91dCIsIl9pbnB1dFByb2ZpbGVBdmF0YXIiLCJ1c2VyTmFtZSIsInVzZXJEZXNjcmlwdGlvbiIsInVzZXJBdmF0YXJMaW5rIiwiYXBpIiwidXNlckluZm8iLCJnZXRTZXJ2ZXJEYXRhIiwicmVzcG9uc2VzIiwiY2FyZERhdGEiLCJ1c2VyRGF0YSIsInNldFVzZXJJbmZvIiwiYWJvdXQiLCJzZXRVc2VyQXZhdGFyIiwiYXZhdGFyIiwic2F2ZVVzZXJJZCIsImNhcmRzIiwicmVuZGVySXRlbXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImNhcmRFbGVtZW50IiwiY3JlYXRlTmV3Q2FyZCIsImFkZEl0ZW0iLCJhZGRNb2RhbE1lc3RvIiwicHJldmVudERlZmF1bHQiLCJpc0xvYWRpbmdNZXNzYWdlIiwiZm9ybVZhbHVlcyIsImdldEZvcm1JbnB1dFZhbHVlcyIsInVybCIsImFkZE5ld01lc3RvIiwibmV3Q2FyZEl0ZW0iLCJhZGROZXdJdGVtIiwiZmluYWxseSIsInNldEV2ZW50TGlzdGVuZXIiLCJwb3B1cFZhbGlkYXRvck1lc3RvIiwiZ2V0UG9wdXBGb3JtIiwiY2FyZCIsImdldFVzZXJJZCIsInBvcHVwWm9vbSIsIm9wZW4iLCJkZWxldGVMaWtlTWVzdG8iLCJnZXRDYXJkSWQiLCJsaWtlc0NvdW50IiwiYWRkTGlrZU1lc3RvIiwiY2xvc2VzdCIsImNhcmRJZCIsInBvcHVwQ29uZmlybSIsImNoYW5nZUhhbmRsZXJTdWJtaXRGb3JtIiwicmVtb3ZlTWVzdG8iLCJnZW5lcmF0ZUNhcmQiLCJlbmFibGVWYWxpZGF0aW9uIiwiY2xlYXJFcnJvciIsInBvcHVwVXNlciIsImZvcm1JbnB1dFZhbHVlcyIsInVwZGF0ZVVzZXJJbmZvIiwibmFtZWlucHV0IiwiYWJvdXRpbnB1dCIsInBvcHVwVmFsaWRhdG9yUHJvZmlsZSIsInVzZXJJbmZvRGF0YSIsInBvcHVwQXZhdGFyIiwidXBkYXRlUHJvZmlsZUF2YXRhciIsInVybGF2YXRhciIsInBvcHVwQXZhdGFyVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==